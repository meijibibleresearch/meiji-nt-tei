<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Meiji Bible — New Testament (TEI Collection)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body { font-family: "Noto Serif JP", serif; margin: 2rem; }
  label { font-weight: bold; margin-right: .5rem; }
  select, input[type="text"], button {
    font-size: 1rem;
    padding: .4rem .6rem;
    margin-right: .5rem;
  }
</style>
</head>
<body>
  <h1>Meiji Bible — New Testament</h1>
  <p>Select a book from the dropdown to open it in the CANDRA viewer in a new tab.</p>

  <label for="bookSelect">Book:</label>
  <select id="bookSelect"></select>

  <label for="chapterJump">Jump to xml:id (optional):</label>
  <input id="chapterJump" type="text" placeholder="e.g., Matthew.CH1.V1" />

  <button id="goBtn">Open in CANDRA</button>

  <script>
    // Base CANDRA viewer URL
    const CANDRA_BASE = "https://candra.dhii.jp/nagasaki/tei/tei_viewer/?file=";

    // List of TEI XML files
    const BOOKS = {
      "Matthew":  "nt/Matthew.xml",
      "Mark":     "nt/Mark.xml",
      "Luke":     "nt/Luke.xml",
      "John":     "nt/John.xml",
      "Acts":     "nt/Acts.xml",
      "Romans":   "nt/Romans.xml",
      "1 Corinthians": "nt/1Corinthians.xml",
      "2 Corinthians": "nt/2Corinthians.xml",
      "Galatians": "nt/Galatians.xml",
      "Ephesians": "nt/Ephesians.xml",
      "Philippians": "nt/Philippians.xml",
      "Colossians": "nt/Colossians.xml",
      "1 Thessalonians": "nt/1Thessalonians.xml",
      "2 Thessalonians": "nt/2Thessalonians.xml",
      "1 Timothy": "nt/1Timothy.xml",
      "2 Timothy": "nt/2Timothy.xml",
      "Titus": "nt/Titus.xml",
      "Philemon": "nt/Philemon.xml",
      "Hebrews": "nt/Hebrews.xml",
      "James": "nt/James.xml",
      "1 Peter": "nt/1Peter.xml",
      "2 Peter": "nt/2Peter.xml",
      "1 John": "nt/1John.xml",
      "2 John": "nt/2John.xml",
      "3 John": "nt/3John.xml",
      "Jude": "nt/Jude.xml",
      "Revelation": "nt/Revelation.xml"
    };

    const select = document.getElementById('bookSelect');
    const jump = document.getElementById('chapterJump');
    const goBtn = document.getElementById('goBtn');

    // Populate dropdown
    Object.entries(BOOKS).forEach(([label, href]) => {
      const opt = document.createElement('option');
      opt.value = href;
      opt.textContent = label;
      select.appendChild(opt);
    });

    // Open in CANDRA
    function openCANDRA() {
      const href = select.value;
      const fragment = jump.value.trim();
      const fileURL = new URL(href, window.location.href).href; // absolute URL
      const viewerURL = CANDRA_BASE + encodeURIComponent(fileURL) +
        (fragment ? "#" + encodeURIComponent(fragment) : "");
      window.open(viewerURL, "_blank");
    }

    goBtn.addEventListener('click', openCANDRA);
    jump.addEventListener('keydown', e => { if (e.key === "Enter") openCANDRA(); });
  </script>
</body>
</html>
